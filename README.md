# jasmiana's Polynomial Solver

如果您不是一名数学家，我们实在不明白您为什么要把宝贵的时间浪费在化简、通分和合并同类项上。
不想算？没问题。交给这款多项式解析器吧。
隆重介绍 jasmiana's Polynomial Solver - 帮您完成繁琐的多项式计算与化简过程，助您早日实现数学领域0的突破。现已在 GitHub 推出。

## 项目概述

本项目旨在开发一个 Python 程序，用于对包含多项式和分式的数学表达式进行自动化简和运算。程序的最终目标是将复杂的表达式化简为一个最简的分式多项式，并以多项式部分加上余数分式的形式表示结果。

这个工具可以帮助用户方便地处理代数表达式，执行加、减、乘、除等运算，并自动进行约分和化简。

## 开发目标

本项目的主要开发目标包括：

1.  设计数据结构来表示多项式和分式多项式。
2.  实现多项式和分式多项式的基本四则运算（加、减、乘、除）。
3.  实现多项式的最大公约数（GCD）算法，用于分式多项式的约分。
4.  构建一个解析器，能够将数学表达式字符串转换为抽象语法树（AST）。
5.  实现一个求值器，遍历 AST 并计算表达式的值。
6.  支持处理包含整数、分数系数的多项式。
7.  支持处理隐式乘法（例如 `2x`, `x(x+1)`, `(x+1)(x-1)` 等）。
8.  将最终的分式多项式结果转化为“商 + 余数/除数”的标准形式表示。

## 已实现功能

目前项目已经实现了以下核心功能：

*   **多项式与分式多项式**: 设计并实现了 `Polynomial` 和 `FractionalPolynomial` 数据结构，能够精确表示包含整数和分数系数的多项式与分式多项式。
*   **基本代数运算**: 实现了多项式和分式多项式的加、减、乘、除（带余数）运算，以及多项式的最大公约数（GCD）算法，用于分式多项式的约分和化简。
*   **表达式解析与求值**: 构建了词法分析器 (Tokenizer) 和递归下降解析器 (Parser)，能够将包含加、减、乘、除、乘方、括号和隐式乘法的数学表达式字符串转换为抽象语法树（AST），并通过求值器 (Evaluator) 计算表达式的值。
*   **分式裂项**: 实现了对分式多项式进行部分分式分解（partial fraction decomposition）的功能，将复杂分式拆解为更简单的项的和。
*   **通分功能**: 当输入为多个分式的组合时，提供选项可以将表达式通分并显示为单一的分式形式。
*   **灵活的输出格式**: 提供了多种输出结果的格式化选项，包括：
    *   将假分式结果自动格式化为多项式部分加上余数分式的形式。
    *   分式裂项结果的各项按次数从高到低排序。
    *   在负号开头的项前添加空格，提高可读性。
    *   将指数符号 `**` 替换为 `^`。
*   **智能用户交互**: 程序能够识别输入表达式的形式，对于简单的两个多项式相除，直接进行分式裂项；对于更复杂的包含分式的表达式组合，提示用户选择通分或裂项操作。
*   **模块化代码结构**: 将词法分析、语法解析、求值、多项式/分式多项式逻辑、分式裂项/排序以及输出格式化等功能分别组织在 `polynomial_parser` 目录下的不同模块文件中，提高了代码的组织性和可维护性。
目结构

项目代码组织在 `polynomial_parser` 目录下，主要包含以下模块：


polynomial_parser/                                        <br>
├── init.py # 包初始化文件                                <br>
├── ast_nodes.py # 定义 AST 节点类                        <br>
├── evaluator.py # 实现 AST 求值逻辑                      <br>
├── fractional_polynomial.py # 实现分式多项式类及其运算    <br>
├── formatting.py # 实现输出格式化相关的函数               <br>
├── parser.py # 实现表达式解析器                           <br>
├── partial_fraction.py # 实现分式裂项功能和排序逻辑       <br>
├── polynomial.py # 实现多项式类及其运算                   <br>
└── tokenizer.py # 实现词法分析器                          <br>
main.py # 项目主入口，提供交互式命令行界面                 <br>
test.py # 测试文件，可查看具体输入输出格式                 <br>
README.md # 项目说明文件                                  <br>  


## 更新日志

### v1.1 (25/05/16)

*   **新增分式裂项、通分功能**: 实现了对分式多项式进行分式裂项、以及对多个分式的通分的功能。
*   **优化输出格式**: 改进了裂项结果的显示格式，包括在负号后添加空格、将指数符号 `**` 替换为 `^`，并根据项的次数进行排序。
*   **新增通分功能**: 当输入包含多个分式时，提供选项可以显示表达式通分后的单一分式形式。
*   **优化用户交互**: 程序能根据输入的表达式形式智能判断，当输入为简单的两个多项式相除时，直接进行裂项；当输入为多个分式组合时，提示用户选择通分或裂项。
*   **代码结构优化**: 将排序键获取 (`get_sort_key`) 和裂项结果打印格式化 (`print_decomposed_terms`) 函数分别移动到 `polynomial_parser/partial_fraction.py` 和新增的 `polynomial_parser/formatting.py` 文件中，提高代码的组织性和简洁性。



## 如何运行

1.  **克隆或下载项目**: 获取项目的代码文件。
2.  **确保 Python 环境**: 项目使用 Python 3，请确保您的系统中安装了 Python 3。项目中使用了 Python 标准库 `fractions` 和 `re`，无需额外安装第三方库。
3.  **运行主程序**: 打开终端或命令行界面，导航到项目根目录，运行 `main.py` 文件：

    ```bash
    python main.py
    ```

4.  **输入表达式**: 程序将进入交互模式，提示您输入数学表达式。例如：

    ```
    多项式/分式多项式化简工具
    
    - 输入表达式，例如：x^2 + 2x + 1
    - 输入 'quit' 或 'exit' 退出。
    
    >>> x * (x + 1)
    结果: x^2 + x
    --------------------
    >>> (x^2 - 4) / (x - 2)
    结果: x + 2
    --------------------
    >>> (x^3-4x^2+6x+7) / (x^2+2x+4)
    结果: x - 6 + (14*x + 31) / (x^2 + 2*x + 4)
    --------------------
    >>> 2x + 3(x+1)
    结果: 5*x + 3
    --------------------
    >>> quit
    退出程序.
    ```



## 未来可能的改进

*   支持更多数学函数（例如平方根、对数等）。
*   支持多个变量（不仅仅是 'x'）。
*   改进解析器以处理更复杂的表达式结构和错误处理。
*   增加单元测试以提高代码健壮性。
*   考虑性能优化，特别是对于高次多项式和复杂表达式。
*   开发图形界面或 Web 界面。


© 2025 jasmiana
